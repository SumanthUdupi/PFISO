# REQ-001: Centralize Camera Logic

## 1. Requirement Title
Centralize Camera Logic into `CameraSystem`

## 2. Problem Statement
Currently, camera logic is scattered between `Player.tsx`, `App.tsx` (OrbitControls), `Lobby.tsx`, and an unused `CameraController.tsx`. `Player.tsx` violates the Single Responsibility Principle by handling camera movement, causing code duplication and potential conflicts.

## 3. Proposed Solution
Extract all camera-related logic from `Player.tsx` and consolidate it into a new, dedicated `CameraSystem` or `CameraController` component. This system will subscribe to the `CameraStore` and `ControlsStore` to manage the camera's state, position, and rotation.

## 4. Implementation Details
- **New File**: `src/systems/CameraSystem.tsx` (or `src/components/game/CameraSystem.tsx`)
- **Move Logic**: Transfer lines 474-532 from `Player.tsx` to `CameraSystem.tsx`.
- **Integration**: Remove camera logic from `Player.tsx`. `Player.tsx` should only update its own position and maybe a "focus point" ref.
- **Hook**: Use `useFrame` in `CameraSystem` to update the camera.

## 5. Code Snippets

**Before (`Player.tsx`):**
```typescript
useFrame((_state, delta) => {
    // ... movement logic ...
    // 7. Camera Logic (lines 474+)
    const { lookVector } = useControlsStore.getState();
    // ... huge block of camera code ...
    camera.position.lerp(...)
})
```

**After (`CameraSystem.tsx`):**
```typescript
const CameraSystem = ({ targetRef }) => {
    useFrame((state, delta) => {
       // Logic moved here
       updateCameraPosition(targetRef.current, delta)
    })
    return null
}
```

## 6. Expected Benefits
- **Architecture**: Cleaner separation of concerns.
- **Maintainability**: Easier to debug camera issues without sifting through player physics code.
- **Extensibility**: Easier to add new camera modes (Cinematic, Cutscene) without bloating Player.

## 7. Dependencies
- `Player.tsx` (needs refactor)
- `CameraStore`

## 8. Priority Level
**Critical**

## 9. Estimated Complexity
**Moderate**
