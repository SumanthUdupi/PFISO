# REQ-004: Camera State Machine

## 1. Requirement Title
Implement Camera State Machine

## 2. Problem Statement
The camera currently switches modes via simple boolean flags (e.g., `viewMode === 'FIRST'`). This scales poorly as we add Cutscenes, Dialogs, Aiming, Inspection, etc.

## 3. Proposed Solution
Implement a proper State Machine (FSM) for the camera.
States: `FOLLOW` (Third Person), `FPS` (First Person), `AIM`, `INSPECT`, `CUTSCENE`, `LOCKED`.
Each state should define its own update logic and transition rules.

## 4. Implementation Details
- **File**: `src/stores/cameraStore.ts`
- **Change**: Add `currentMode` enum.
- **File**: `CameraSystem.tsx`
- **Change**: Switch on `currentMode` to determine which logic to run.

## 5. Code Snippets
```typescript
enum CameraMode {
    FOLLOW,
    FPS,
    AIM,
    INSPECT
}

// Update Loop
switch (mode) {
    case CameraMode.FOLLOW: updateFollowCamera(dt); break;
    case CameraMode.FPS: updateFPSCamera(dt); break;
    // ...
}
```

## 6. Expected Benefits
- **Scalability**: Cleanly add new behaviors.
- **UX**: Easier to manage smooth transitions between states (e.g. lerping from Follow to Aim).

## 7. Dependencies
- `REQ-001`

## 8. Priority Level
**High**

## 9. Estimated Complexity
**Moderate**
